<!doctype html><html><head><title>xcode-tools 在每次系统更新后的问题 &#183; work4fun</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=generator content="Hugo 0.83.1"><link rel=stylesheet href=https://albert.work4fun.io/css/vec.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.ico><link href rel=alternate type=application/rss+xml title=work4fun></head><body><header><nav><ul><li class=pull-left><a href=https://albert.work4fun.io>/home/work4fun</a></li><li class=pull-left><a href=https://github.com/HongjiangHuang>~/about me</a></li><li class=pull-left><a href=/posts>~/post</a></li><li class="pull-left current"><a href=/snippet>~/snippet</a></li><li class=pull-left><a href=/swift-ui-wesplit>~/swift-ui</a></li><li class=pull-right><a href><i class="fas fa-rss"></i></a></li></ul></nav></header><div class="content wide"><section class=post><h1 class=post-title><a href=https://albert.work4fun.io/snippet/gyp-mac-xcode/>xcode-tools 在每次系统更新后的问题</a></h1><span class=post-date>Jun 17, 2021</span><div class=post-content><p>Oops&mldr;今天又遇到 gyp 报错了.. 记得明明安装过 xcode-tools..</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>No receipt <span style=color:#66d9ef>for</span> <span style=color:#e6db74>&#39;com.apple.pkg.CLTools_Executables&#39;</span> found at <span style=color:#e6db74>&#39;/&#39;</span>.

No receipt <span style=color:#66d9ef>for</span> <span style=color:#e6db74>&#39;com.apple.pkg.DeveloperToolsCLILeo&#39;</span> found at <span style=color:#e6db74>&#39;/&#39;</span>.

No receipt <span style=color:#66d9ef>for</span> <span style=color:#e6db74>&#39;com.apple.pkg.DeveloperToolsCLI&#39;</span> found at <span style=color:#e6db74>&#39;/&#39;</span>.

gyp: No Xcode or CLT version detected!
gyp ERR! configure error 
gyp ERR! stack Error: <span style=color:#e6db74>`</span>gyp<span style=color:#e6db74>`</span> failed with exit code: <span style=color:#ae81ff>1</span>
gyp ERR! stack     at ChildProcess.onCpExit <span style=color:#f92672>(</span>/Users/alberthuang/.nvm/versions/node/v10.24.1/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:351:16<span style=color:#f92672>)</span>
gyp ERR! stack     at ChildProcess.emit <span style=color:#f92672>(</span>events.js:198:13<span style=color:#f92672>)</span>
gyp ERR! stack     at Process.ChildProcess._handle.onexit <span style=color:#f92672>(</span>internal/child_process.js:248:12<span style=color:#f92672>)</span>
gyp ERR! System Darwin 20.5.0
gyp ERR! command <span style=color:#e6db74>&#34;/Users/alberthuang/.nvm/versions/node/v10.24.1/bin/node&#34;</span> <span style=color:#e6db74>&#34;/Users/alberthuang/.nvm/versions/node/v10.24.1/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js&#34;</span> <span style=color:#e6db74>&#34;rebuild&#34;</span>
gyp ERR! cwd /Users/alberthuang/code/bellcode/coder/node_modules/native-is-elevated
</code></pre></div><p>看了一下相关的代码 <a href=https://github.com/nodejs/node-gyp/blob/0da2e0140dbf4296d5ba7ea498fac05e74bb4bbb/gyp/pylib/gyp/xcode_emulation.py#L1543>https://github.com/nodejs/node-gyp/blob/0da2e0140dbf4296d5ba7ea498fac05e74bb4bbb/gyp/pylib/gyp/xcode_emulation.py#L1543</a></p><p>的确是找不到对应的xcode-tools包才会报这个错误</p><p>重新安装xcode-tools解决</p><pre><code>sudo rm -rf $(xcode-select -p)
sudo xcode-select --install
</code></pre><p>后续升级系统再深入调查一下为什么每次更新都会导致这个问题。 (:</p></div></section><section class="pagination clearfix"><a class="btn next" href=https://albert.work4fun.io/snippet/english-ishard/>英语好难呀</a></section><script src=https://giscus.app/client.js data-repo=HongjiangHuang/HongjiangHuang data-repo-id="MDEwOlJlcG9zaXRvcnkzNjYzMDg1ODM=" data-category-id=MDE4OkRpc2N1c3Npb25DYXRlZ29yeTMzMDM2MjI0 data-mapping=title data-reactions-enabled=1 data-theme=light crossorigin=anonymous async></script></div><footer><div class=footer-info><p><a href="mailto:r.albert.huang@gmail.com?subject="><i class="far fa-envelope"></i> r.albert.huang@gmail.com</a>
{
<a href=https://gohugo.io/ title="Hugo :: A fast and modern static website engine">Hugo 0.83.1</a>,
<a href=https://github.com/IvanChou/yii.im title=vec>Vec</a>
}
{<a href=http://creativecommons.org/licenses/by-nc-nd/3.0/ title="CC BY-NC-ND 3.0">CC BY-NC-ND 3.0</a>}</p></div></footer><script src=https://albert.work4fun.io/js/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script></body></html>